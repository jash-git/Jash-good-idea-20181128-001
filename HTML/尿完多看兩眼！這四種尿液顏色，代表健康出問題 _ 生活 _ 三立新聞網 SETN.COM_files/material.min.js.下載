/*! material 2018-10-08 3:28:16 PM */

"use strict";var setup_cotainer_size=function(a){var b=a;void 0===b&&(b="swiffyobject");var c=document.getElementById(b);if(null===c)throw"container not found";var d=JSON.parse(decodeURIComponent(window.location.hash.substr(1)));c.style.width=d.width+"px",c.style.height=d.height+"px"};!function(){switch(window.document.readyState){case"loading":case"interactive":window.onload=function(){window.document.getElementsByTagName("body")[0].style.margin="0px"};break;case"complete":window.document.getElementsByTagName("body")[0].style.margin="0px"}}(),window.oneadMaterial=function(){function a(a){}function b(){var b=!1,c=navigator.userAgent.toLowerCase().indexOf("iphone")>-1,d=navigator.userAgent.toLowerCase().indexOf("ipad")>-1,e=navigator.userAgent.toLowerCase().indexOf("ipod")>-1,f=navigator.userAgent.toLowerCase().indexOf("android")>-1,g=e||d||c;return(g||f)&&(b=!0),h.isAndroid=f,h.isIos=g,h.isMobile=b,a("check is mobile = "+b),b}function c(){var a=navigator.userAgent,b=a.indexOf("Line")>-1,c=a.indexOf("FBAN")>-1||a.indexOf("FBAV")>-1;h.isLine=b,h.isFB=c}function d(){var b=!0;try{b=!(parent.location.host.length>=0)}catch(a){b=!0}return h.isCrossDomain=b,a("check is cross domain = "+b),b}function e(){var b=!1;try{(parent.GUOSHI||parent.Guoshi)&&(b=!0)}catch(c){a("cant get parent"),d()&&(b=!0)}return h.isInBanner=b,a("check is in banner = "+b),b}function f(a){return h.isIos||h.isLine||h.isAndroid&&h.isFB?a.substr(a.indexOf("//"),a.length):a}var g={MATERIAL:"MATERIAL",ONEAD_PLAYER:"ONEAD_PLAYER",EVENTS:{IMPRESSION:"impression",Q0:"q0",Q25:"q25",Q50:"q50",Q75:"q75",Q100:"q100",CLICK:"click",VIDEO_CLICK:"videoClick",BANNER_CLICK:"bannerClick",MORE:"more"},TRACKING_PLATFORM:{GTAG:"GTAG",FB:"FB"}},h={isInBanner:void 0,isCrossDomain:void 0,isMobile:void 0,isBrandMaster:!1,baseWidth:640,baseHeight:360,isIos:void 0,isAndroid:void 0,isFB:void 0,isLine:void 0},i={CONST:g,_isPlayerReady:!1,_delayedActions:void 0,_messageSendObj:void 0,_messageReceiveObj:void 0,_isipIndex:void 0,_trackingEventSetting:{},_trackingEventQueue:[],_clickUrl:{video:void 0,banner:void 0},_setVideoClickUrl:function(a){this._clickUrl.video=f(a)},_getVideoClickUrl:function(){return this._clickUrl.video},_setBannerClickUrl:function(a){this._clickUrl.banner=a},_getBannerClickUrl:function(){return this._clickUrl.banner},_videoEndedCallback:function(){},_videoTriggeredCallbacks:[],_startAfterPlayerReady:function(){for(var a;a=this._delayedActions.shift();)a()},_checkAndExecute:function(a){this._isPlayerReady?a():this._delayedActions.push(a)},_getPlayer:function(){return this._player||(h.isInBanner?h.isMobile?this._player=parent.Guoshi.player:this._player=parent.GUOSHI.player:h.isMobile?this._player=window.Guoshi.player:this._player=window.frames.oneadPlayer.GUOSHI.player),this._player},_sendMessage:function(b){a(" action = "+b.action),b.sender=g.MATERIAL,b.isipIndex=this._isipIndex,this._messageSendObj.postMessage(JSON.stringify(b),"*")},_sendOneCommand:function(a){this._checkAndExecute(function(){i._sendMessage({action:a.action,param:a.param})})},_sendCommand:function(a){a instanceof Array?a.forEach(function(a){i._sendOneCommand(a)}):i._sendOneCommand(a)},sendClickTracking:function(a){(new Image).src=a.url},setVideoPositionXY:function(a){this._sendCommand([{action:"setVideoPositionXY",param:a},{action:"setIdentityPositionXY",param:a}])},setVideoWidthHeight:function(a){this._sendCommand([{action:"setVideoWidthHeight",param:a},{action:"setIdentityWidthHeight",param:a}])},setIdentityPositionXY:function(a){this._sendCommand({action:"setIdentityPositionXY",param:a})},setIdentityWidthHeight:function(a){this._sendCommand({action:"setIdentityWidthHeight",param:a})},callVideoPlay:function(){this._sendCommand({action:"callVideoPlay"})},callVideoPause:function(){this._sendCommand({action:"callVideoPause"})},callIdentityHide:function(){this._sendCommand({action:"callIdentityHide"})},sendClickLandingPage:function(a){this._sendCommand({action:"sendClickLandingPage",param:a})},sendVideoClickAndOpenUrl:function(a){this._sendCommand({action:"sendVideoClickAndOpenUrl",param:a})},sendClickWarroom:function(a){this._sendCommand({action:"sendClickWarroom",param:a})},callbackVideoEnded:function(a){a&&a.callback&&(this._videoEndedCallback=a.callback)},callbackVideoTriggered:function(a){this._sendCommand({action:"callbackVideoTriggered",param:a.time}),a&&a.callback&&this._videoTriggeredCallbacks.push({time:a.time,callback:a.callback}),this._videoTriggeredCallbacks.length>1&&this._videoTriggeredCallbacks.sort(function(a,b){return a.time-b.time})},removeSkipButton:function(){this._sendCommand({action:"removeSkipButton"})},removeCountDownText:function(){this._sendCommand({action:"removeCountDownText"})},removeBannerClickArea:function(){this._sendCommand({action:"removeBannerClickArea"})},getVideoTag:function(a){this._checkAndExecute(function(){var b,c=a.callback,d=a.disablePlayerControl;h.isCrossDomain?c(new Error("can not get video because of cross domain issue")):(d&&i._checkAndExecute(function(){i._sendMessage({action:"disablePlayerControl"})}),b=h.isMobile?document.getElementById("onead_video"+ONEAD.isip_index):ONEAD.html5_player.player.videoPlayer.videoTag._element,c(null,b))})},enableMultipleClick:function(){this._sendCommand({action:"enableMultipleClick"})},getIsipIndex:function(){var b=location.href,c=/\?isipIndex=(\d+)/,d=b.match(c);d&&(this._isipIndex=d[1]),a("this._isipIndex= "+this._isipIndex)},adjustIdentityIconClickAreaSize:function(a){this._sendCommand({action:"adjustIdentityIconClickAreaSize",param:a})},hideBottomScraper:function(){this._sendCommand({action:"hideBottomScraper"})},landscape:function(){this._sendCommand([{action:"setVideoWidthHeight",param:{width:950,height:390}},{action:"setIdentityWidthHeight",param:{width:950,height:390}},{action:"hideBottomScraper"}])},setMoreUrl:function(a){this._sendCommand({action:"setMoreUrl",param:a})},setVideoClickUrl:function(a){this._sendCommand({action:"setVideoClickUrl",param:a})},setVideoClickAreaToVideoSize:function(){this._sendCommand({action:"setVideoClickAreaToVideoSize"})},adjustCountdownColor:function(a){this._sendCommand({action:"adjustCountdownColor",param:a})},executeCodeInPlayer:function(a){this._sendCommand({action:"ONEAD_EXECUTE_CODE",param:a.toString()})},insertScriptInHead:function(a){var b=a.src,c=a.async||!1,d=a.content;if(b&&-1===b.indexOf("//")&&!b&&!d)throw new Error;this._sendCommand({action:"insertScriptInHead",param:{src:b,async:c,content:d}})},subscribeTrackingEvent:function(a){var b,c=a.eventName,d=a.action||function(){};d.priority=a.priority||1,void 0===this._trackingEventSetting[c]&&(this._trackingEventSetting[c]=[]),b=this._trackingEventSetting[c],b.push(d),b.sort(function(a,b){return b.priority-a.priority})},setupTrackingEvent:function(a){a(),this._sendCommand({action:"ONEAD_SYNC_TRACKING_EVENT"})},batchSetupTrackingEvents:function(a){var b=this;if(!Array.isArray(a))throw new Error("use array as input");a.forEach(function(a){switch(a.eventName){case g.EVENTS.VIDEO_CLICK:b.setupVideoClick(a);break;case g.EVENTS.BANNER_CLICK:b.setupBannerClick(a);break;case g.EVENTS.CLICK:h.isMobile?(b.setupVideoClick(a),b.setupBannerClick(a)):b.subscribeTrackingEvent(a);break;case g.EVENTS.IMPRESSION:case g.EVENTS.Q0:case g.EVENTS.Q25:case g.EVENTS.Q50:case g.EVENTS.Q75:case g.EVENTS.Q100:b.subscribeTrackingEvent(a);break;default:throw new Error("no this event: "+a.eventName)}}),this._sendCommand({action:"ONEAD_SYNC_TRACKING_EVENT"})},setupBannerClick:function(a){var b=this;if(a.url&&b._setBannerClickUrl(a.url),h.isMobile){if(!b._getBannerClickUrl())throw new Error("no banner click url");document.body.addEventListener("click",function(){a.action&&a.action(),i.sendClickLandingPage({url:b._getBannerClickUrl()})})}else b.setupTrackingEvent(function(){b.subscribeTrackingEvent(a)})},setupVideoClick:function(a){var b=this;if(a.url&&b._setVideoClickUrl(a.url),a.action&&b.subscribeTrackingEvent({eventName:g.EVENTS.VIDEO_CLICK,action:a.action}),h.isMobile){if(!b._getVideoClickUrl())throw new Error("need url when track videoClick in mobile");b.setupTrackingEvent(function(){b.subscribeTrackingEvent({eventName:g.EVENTS.VIDEO_CLICK,action:function(){b.sendVideoClickAndOpenUrl({url:b._getVideoClickUrl()})},priority:-1})})}},setupAppDownloadUrl:function(a){var b,c=a.getCustomUrl;b=c&&c().indexOf("//")>-1?c():a.all?a.all:h.isAndroid?a.android:a.ios,a.forBannerClick?this._setBannerClickUrl(b):a.forVideoClick?this._setVideoClickUrl(b):(this._setBannerClickUrl(b),this._setVideoClickUrl(b))},addTrackingAccount:function(a){if(!a.platform||!a.id)throw new Error("[Material] Tracking Account Setting Error");if(a.platform===g.TRACKING_PLATFORM.GTAG){var b=document.createElement("script"),c=document.createTextNode("function gtag(){dataLayer.push(arguments);}");b.appendChild(c),document.head.appendChild(b)}a.events=a.events||[g.EVENTS.IMPRESSION,g.EVENTS.Q50,g.EVENTS.CLICK],this._sendCommand({action:"addTrackingAccount",param:a})},setup:function(){a("初始化");var f=this;f._delayedActions=[],e(),b(),d(),c(),f.getIsipIndex(),h.isCrossDomain||h.isInBanner?(f._messageReceiveObj=window,f._messageSendObj=window.parent):(f._messageReceiveObj=window,f._messageSendObj=window,h.isBrandMaster=!0),f._messageReceiveObj.addEventListener("message",function(b){if(void 0!==b.data){var c;try{c=JSON.parse(b.data)}catch(a){}if(void 0!==c&&c.sender===g.ONEAD_PLAYER){if(c.isipIndex!==f._isipIndex){if(!1===h.isBrandMaster&&void 0!==c.isipIndex&&void 0!==f._isipIndex)return}else a("符合驗證條件");switch(a("message data from player = "+JSON.stringify(c)),c.action){case"ONEAD_VIDEO_ENDED":f._videoEndedCallback();break;case"ONEAD_PLAYER_READY":f._isPlayerReady||(f._isPlayerReady=!0,f._startAfterPlayerReady());break;case"ONEAD_VIDEO_TRIGGER":var d=c.data,e=f._videoTriggeredCallbacks;e.forEach(function(a,b){a.time===d&&(a.callback(),e.splice(b,1))});break;case"ONEAD_TRACKING_EVENT":var i,j=c.param;i=f._trackingEventSetting[j],i&&i.forEach(function(a){a()}),"skip"===j&&f._sendMessage({action:"MATERIAL_TRACKING_EVENTS_SENT"})}}}})}};return i.setup(),i._sendMessage({action:"checkIfPlayerReady"}),i}();